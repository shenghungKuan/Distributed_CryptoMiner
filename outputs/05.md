## Test 05: Static Analysis [1 pts]

Checks for programming and stylistic errors with cppcheck and gcc/clang

```

if ! ( which cppcheck &> /dev/null ); then
    # "cppcheck is not installed. Please install (as root) with:"
    # "pacman -Sy cppcheck"
    test_end 1
fi

cppcheck --enable=warning,style,performance,portability \
    --error-exitcode=1 \
    "${TEST_DIR}/../" || test_end 1
Checking /home/nesaar/P4-the-seg-faults/common.c ...
/home/nesaar/P4-the-seg-faults/common.c:12:36: portability: 'buf' is of type 'void *'. When using void pointers in calculations, the behaviour is undefined. [arithOperationsOnVoidPointer]
    ssize_t read_sz = read(fd, buf + total, length - total);
                                   ^
/home/nesaar/P4-the-seg-faults/common.c:41:38: portability: 'buf' is of type 'const void *'. When using void pointers in calculations, the behaviour is undefined. [arithOperationsOnVoidPointer]
    ssize_t write_sz = write(fd, buf + total, length - total);
                                     ^
Checking /home/nesaar/P4-the-seg-faults/common.c: DEBUG_ON...
1/5 files checked 9% done
Checking /home/nesaar/P4-the-seg-faults/miner-client.c ...
/home/nesaar/P4-the-seg-faults/miner-client.c:183:9: warning: %d in format string (no. 1) requires 'int' but the argument type is 'unsigned int'. [invalidPrintfArgType_sint]
        printf("difficulty %d\n", difficulty);
        ^
/home/nesaar/P4-the-seg-faults/miner-client.c:186:43: warning: Shifting 32-bit value by 32 bits is undefined behaviour. See condition at line 181. [shiftTooManyBits]
    uint32_t difficulty_mask = UINT32_MAX >> difficulty;
                                          ^
/home/nesaar/P4-the-seg-faults/miner-client.c:181:38: note: Assuming that condition 'difficulty>32' is not redundant
    if (difficulty < 1 || difficulty > 32) {
                                     ^
/home/nesaar/P4-the-seg-faults/miner-client.c:186:43: note: Shift
    uint32_t difficulty_mask = UINT32_MAX >> difficulty;
                                          ^
2/5 files checked 36% done
Checking /home/nesaar/P4-the-seg-faults/miner.c ...
3/5 files checked 58% done
Checking /home/nesaar/P4-the-seg-faults/sha1.c ...
4/5 files checked 88% done
Checking /home/nesaar/P4-the-seg-faults/task.c ...
/home/nesaar/P4-the-seg-faults/task.c:113:36: warning: Either the condition 'file==NULL' is redundant or there is possible null pointer dereference: file. [nullPointerRedundantCheck]
    while (fgets(buf, sizeof(buf), file) != NULL) {
                                   ^
/home/nesaar/P4-the-seg-faults/task.c:106:15: note: Assuming that condition 'file==NULL' is not redundant
    if ( file == NULL ){
              ^
/home/nesaar/P4-the-seg-faults/task.c:113:36: note: Null pointer dereference
    while (fgets(buf, sizeof(buf), file) != NULL) {
                                   ^
5/5 files checked 100% done
 --> Test failed (1)
```

